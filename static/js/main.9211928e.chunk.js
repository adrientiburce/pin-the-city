(this["webpackJsonppin-the-city"]=this["webpackJsonppin-the-city"]||[]).push([[0],{109:function(t,o,c){},110:function(t,o,c){},113:function(t,o,c){"use strict";c.r(o);var e=c(19),a=c.n(e),i=c(84),l=c.n(i),n=(c(109),c(34)),s=(c(110),c(90)),A=c(74),d=c(118),r=c(117),E=c(81),y=c(88),P=c(69),O=c(59),u=c(91),b=c(89),j=c(50),N=c(48),S=c(7),L=c(57),R=c(82),f=c(64),h=c(73);c(111);function m(t){return t*Math.PI/180}var v={capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()},calcCrow:function(t,o,c,e){var a=m(c-t),i=m(e-o),l=(t=m(t),c=m(c),Math.sin(a/2)*Math.sin(a/2)+Math.sin(i/2)*Math.sin(i/2)*Math.cos(t)*Math.cos(c));return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},shuffleArray:function(t){for(var o=t.length-1;o>0;o--){var c=Math.floor(Math.random()*(o+1)),e=[t[c],t[o]];t[o]=e[0],t[c]=e[1]}return t}},p=c(17);var w=function(t){var o=t.layer,c=t.city,a=t.score,i=t.setScore,l=t.setDistance,m=Object(e.useState)(null),w=Object(n.a)(m,2),U=w[0],I=w[1],C=function(t){var o=Object(e.useRef)();return Object(e.useEffect)((function(){o.current=t})),o.current}({layer:o}),g=Object(e.useState)(null),B=Object(n.a)(g,2),x=B[0],T=B[1],M=Object(e.useState)(null),D=Object(n.a)(M,2),Y=D[0],V=D[1],k=Object(e.useState)(null),q=Object(n.a)(k,2),H=q[0],z=q[1],F=Object(e.useState)(null),Q=Object(n.a)(F,2),G=Q[0],J=Q[1],Z=Object(e.useState)(!1),X=Object(n.a)(Z,2),K=X[0],W=X[1],$=new d.a({source:new L.a({url:"https://api.maptiler.com/tiles/satellite/{z}/{x}/{y}.jpg?key=17SpgImON6btgX4D98pg"})}),_=new d.a({source:new R.a({layer:"watercolor"})}),tt=new d.a({source:new R.a({layer:"terrain-background"})});function ot(t,o,e,a){var i=new y.a(new P.a(t)),l=new r.a({source:new E.a({features:[i]}),style:new O.b({image:new u.a({src:e,scale:.8,rotation:o})})}),n=new r.a({source:new E.a({features:[i]}),style:new O.b({text:new b.a({text:v.capitalize(c.city),fill:new j.a({color:"#fff"}),offsetY:-35,font:"15px Arial"})})});a?T(l):(U.addLayer(n),V(l),z(n)),U.addLayer(l)}var ct=function(t){var o;switch(t){case"satellite":o=$;break;case"terrain":o=tt;break;case"watercolor":o=_;break;default:o=tt}return o};return Object(e.useEffect)((function(){var t=new s.a({target:null,layers:[ct(o)],view:new A.a({center:[302151.8127592789,5924266.214486205],zoom:6,maxZoom:12,minZoom:4}),controls:Object(h.a)().extend([new f.a])});I(t)}),[]),Object(e.useEffect)((function(){if(null!==U){U.setTarget("map");var t=c.location.split(","),o=U.on("click",(function(o){var c=o.coordinate,e=Object(S.m)(c,"EPSG:3857","EPSG:4326"),n=Object(S.m)([t[1],t[0]],"EPSG:4326","EPSG:3857");ot(o.coordinate,.15,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAQSwAAEEsB549FewAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAPtSURBVHic7ZlNTBxlGMd/z+xuCyUKqf1QatUtXSUpH9V2iT0YTVRMJFEvJCbGg0QvctdEjeGmVU8eejDqiYMfiakx9mA06a0psCjFRKWFpbEoFizQlu22uzuPB6i2ZFeB91nemMzvRGaY3/Off3Z2dt4RNohfDx2qLRQWuxQeRXgASAINy7vngSyQQfluU6Lu2O4TJ65sRC6p9oDxAwfqCQqvAi8D9as8bAE4Qpg43JTJLFQvXRULUJDswdZeRPoUblunZlZU+5JDo0cE1DTgMlUpIPvIPTWl3K0fiPK8hU/g05ow0dOYyeQsfCvctmT3728IE6VvQNLG6gHCRKf1JRFYyrS7OxbGS/1VOHmADuTaZ9rdHbOUmhYwcXbsXUS6LJ03IdI5PvnL26ZKK9FEx7521dgwZUoN4nHim2so5vOEpaLrqDAMSacyp4ZdRQBxCwmAauw9ypx8/R27qdu2E0RQVS7P/M6l6SmXUUEg+hbwhIvkb5mFJJtufRh4bOX2LVu3U7f9dpClD5qIcMuORmob1ntXXEakc6Kj7SE3yRImBahKT7nttQ1by/5/pe1rm6kvOEswKEBBVHjSIszakC41+A5zLuDsgy3NwLZy+/IX58sek7845zoWYEf2YNu9rhLnAophrLnSvsU/z5O7MHPzttk/yF2YdR0LQAmtOHu1ON8FBHZW3KnK/LlJLs9ME9+0mUL+CqXCNdeR/8yWf5m9Stxvg6HW/NeVWLyap3g17zxqJYLUujoMvgRlQ57byyHCoqvDuYBA9DdXx3rR0H22cwFhqfSTq2O9lISfXR0mzwLj6bZzwC4L1xqYaho8daerxOZpUPnKxLMm5KiFxeancEw/pEpLVpVGhspHFiKTAvaeHM0AX1i4VoOin6eGRr63cNktiIi8BhTMfJUpSBB7w0pmVkDTwMgYyJtWvkqo8nrTyR9OW/nMF0XH0+39oM9Ze5fQ/qbBUZOV5uuYrgkCBHULLyIcs/ai+nVQd+kla615Acnjk/k9d9/3FMhhK6fA+3uSzU8nj0+aP1BU9dXYmY7WZ0TlHSC1TsVYqPpKamj0S8tcN2L+CbiRvQOjR+fCxD6gV2BiDYeOA71zYaKlmicPG/By9DpL7wrb0wT6uCr3q5BaiG9pAagv5n4U5bQowyDfJodGBqv1LnAlG1bASp7t6WsshUwBxAJ2ffJxn5enyqpeAv8HogJ8B/BNVIDvAL6JCvAdwDdRAb4D+CYqwHcA30QF+A7gm6gA3wF8ExXgO4BvogJ8B/BNVIDvAL6JCvAdwDdRAb4D+CYqwHcA30QF+A7gm6gA3wF8462A6bs4DwwDw8t/e+EvEJAYca8hpZEAAAAASUVORK5CYII=",!0),ot(n,-.15,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAEYklEQVR4Xu1ZXWwUVRi9s7gKQioYkARD0t07rZg6dwqzu8CLkvg/s5AabTQx+lBDIIEHJFHkbV4MMRKMGqzBv5jwoGI1yExJqiZNfEDY2dqZEX/o3NkmRA0BAqIUkqU7ZIptNmVLd+Z+0xfvPu5853xnzt65892zApqjz+n16xdUq5e1AKGHcdHZ2qgtNUkvCtD3t6cX9q88duzKXEgTkm5CFeUulKruwpqzO0ovapI9qJZ+A5fLf0fBRa1NzIAAIaGSk7Zli+67UUXV1/uGtD1jue8JCAUsPDNhEzGgsqF1/vhYywFRdV6AEO2b5PP5tXTPinJ5DIKvngPcgEpn5+JM1/AFaKEhHz2iLIZ+JEANCLq75/mV3w7joqslYoAhDWQzq1Th0KFxKH5QA2hB3odV+2UocY14PJPsFUvOK1A9wAzwCx1yVj05DCXsVjwjR4jSVnaGIHqBGUDz5FusOY9MF3VuSEMLly5HSBBQEATo37N/oXuUo0zaqSENYMt9nInkPzCIAZW89FBGcwcbCbpy+qWbvl6w8iNm7X4/eTB7wvmBlQjEAD9HPs0WnReni7n4aze6Y1HLTRqvXrqIlnT0MWmnpvQJLrk9TCQIIWYDwoFH0FGtkZAkDQj7BTpKsQ5IzAaMrnvg/tYnfv5lpl8iqUcg7OcbZFXWcn5nWQXMBngF+SlRtb+aScR5exO68+5lU5cvnzuDlq42WDRPYUcMqavNcg+zkDEbQAvyVqzavSwi4mI9Q9oiWu6BuPgQx25AjuzARectFhFxsdQkO3DJeTsuHsQALydvEYv2+ywi4mL9frI5e8L5MC4exAA/TzZmNecbFhFxsdSQNGy5/XHxIAZ4azpEcdPJERYRcbGnTAm3l1w/Lh7EgInmejJhxaw3prPvYcybYCiS5kjvTDnfrDcRs4Ca8n5csrfHhE/BQAzw1kqK+KRrsYqJgh8x5DVtlv1TFEyjWhADJlZBnnyJNedpVkHN4D1T+kIsuc82UztbDZwBBbkdqzbTWDqb2Mnr9GhnOz4+DLLxghlwYxXIr2HN3tPsjcSp8wzyqmg5b8bBJvoITP06efkg1uznoQTW81BTOohLLkjSPMkLugJC0jASr4219GHVUSFNoIZkphb980xmcPQqJC+4AaG4iXR49NTrWLN3QYj1TfJOpvW+nZBpcGIroP6GvYLUJaru1ywmQBx5b9U/kRVQ39BSlPSSVHUz1pz9UYygJtl2oZb+IFcuV6PgotYmbsCkoBv/Fcp5lAoeDQK0OpwZygPrJqI05bEfU9QkfUKAhhASvstYdok16mrWiDkzYLqg53r0FeM19Ef4/bwUuvezj/U/mxUNWccNgHQzChdfAfwR4HsA3wT5W4C/BvkcwAchPgnyUZifBfhhiJ8G+XGY5wE8EOGJEI/EeCbIQ9EomSJULU+FoZyMysNTYZ4K81SYp8I8FeapME+F/7+p8AZdv23ZKDoezg9nW9HaQV2/FnWWgKi/DixoI19uxqmzAAAAAElFTkSuQmCC",!1);var s=v.calcCrow(t[0],t[1],e[1],e[0]);setTimeout((function(){var t,o;t=n,o=12,U.getView().animate({center:t,zoom:o})}),200);var A=Math.round(s);console.log("D",s),l(A),s<100&&i(a+100-A),W(!0)}));J(o)}}),[c]),Object(e.useEffect)((function(){null!=U&&(U.removeLayer(ct(C.layer)),U.addLayer(ct(o)))}),[o]),Object(e.useEffect)((function(){null!==Y&&(console.log("city CHANGED",c),U.removeLayer(x),U.removeLayer(Y),U.removeLayer(H),Object(N.b)(G),l(0))}),[c]),Object(e.useEffect)((function(){K&&(Object(N.b)(G),W(!1))}),[K]),Object(p.jsx)("div",{id:"map",className:"map-container"})},U=c.p+"static/media/pin.cb6cde87.svg",I=c.p+"static/media/satellite.98aa5691.png",C=c.p+"static/media/terrain.0905c933.png",g=c.p+"static/media/watercolor.419c9c9e.png",B=c(80);var x=function(){var t=Object(e.useState)("satellite"),o=Object(n.a)(t,2),c=o[0],a=o[1],i=Object(e.useState)(!0),l=Object(n.a)(i,2),s=l[0],A=l[1],d=Object(e.useState)(0),r=Object(n.a)(d,2),E=r[0],y=r[1],P=Object(e.useState)({city:"",location:""}),O=Object(n.a)(P,2),u=O[0],b=O[1],j=Object(e.useState)(function(t){var o=Object.keys(B);o=v.shuffleArray(o);for(var c=[],e=0;e<t;++e)c.push(B[o[e]]);return c}(5)),N=Object(n.a)(j,2),S=N[0],L=(N[1],Object(e.useState)(0)),R=Object(n.a)(L,2),f=R[0],h=R[1],m=Object(e.useState)(0),x=Object(n.a)(m,2),T=x[0],M=x[1],D=E+1;return Object(e.useEffect)((function(){S.length>0&&b(S[E])}),[S]),Object(e.useEffect)((function(){console.log(S),console.log(E),5!==E?b(S[E]):A(!1)}),[E]),Object(p.jsxs)("div",{className:"App",children:[Object(p.jsxs)("div",{className:"top",children:[Object(p.jsxs)("div",{className:"header",children:[Object(p.jsxs)("div",{className:"title",children:[Object(p.jsx)("h1",{children:"Pin the city\xa0"})," ",Object(p.jsx)("img",{src:U,alt:"React Logo",width:"20px"})]}),Object(p.jsxs)("div",{className:"edit-buttons",children:["satellite"!==c&&Object(p.jsxs)("div",{className:"map-edit",onClick:function(){return a("satellite")},children:[Object(p.jsx)("img",{src:I,alt:"satellite map",width:"60px"}),Object(p.jsx)("caption",{children:"Vue Satelitte"})]}),"terrain"!==c&&Object(p.jsxs)("div",{className:"map-edit",onClick:function(){return a("terrain")},children:[Object(p.jsx)("img",{src:C,alt:"terrain map",width:"60px"}),Object(p.jsx)("caption",{children:"Vue Carte"})]}),"watercolor"!==c&&Object(p.jsxs)("div",{className:"map-edit",onClick:function(){return a("watercolor")},children:[Object(p.jsx)("img",{src:g,alt:"watercolor map",width:"60px"}),Object(p.jsx)("caption",{children:"Vue Dessin\xe9"})]})]})]}),Object(p.jsxs)("div",{className:"game",children:[Object(p.jsxs)("h2",{children:[D,"/",5]}),Object(p.jsxs)("h2",{children:["Placer la ville de ",v.capitalize(u.city)," ",T>0&&", "+T+" km"]}),s&&E<4&&Object(p.jsx)("button",{onClick:function(){return y(E+1)},children:" Ville suivante"}),Object(p.jsxs)("h2",{children:["Score : ",f," "]})]})]}),Object(p.jsx)("div",{className:"box",children:Object(p.jsx)(w,{layer:c,city:u,score:f,setScore:h,setDistance:M})})]})},T=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,119)).then((function(o){var c=o.getCLS,e=o.getFID,a=o.getFCP,i=o.getLCP,l=o.getTTFB;c(t),e(t),a(t),i(t),l(t)}))};l.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(x,{})}),document.getElementById("root")),T()},80:function(t){t.exports=JSON.parse('[{"Postal code":93000,"city":"BOBIGNY","location":"48.907688244, 2.43863982727"},{"Postal code":20000,"city":"AJACCIO","location":"41.9347926638, 8.70132275974"},{"Postal code":38000,"city":"GRENOBLE","location":"45.1821215167, 5.72133051752"},{"Postal code":26000,"city":"VALENCE","location":"44.9229811667, 4.91444013136"},{"Postal code":45000,"city":"ORLEANS","location":"47.8828634214, 1.91610357477"},{"Postal code":25000,"city":"BESANCON","location":"47.2553872249, 6.01948696494"},{"Postal code":63000,"city":"CLERMONT-FERRAND","location":"45.7856492991, 3.11554542903"},{"Postal code":19000,"city":"TULLE","location":"45.2731516999, 1.76313875655"},{"Postal code":"05000","city":"GAP","location":"44.5798600596, 6.06486052138"},{"Postal code":82000,"city":"MONTAUBAN","location":"44.0222594578, 1.36408636501"},{"Postal code":79000,"city":"NIORT","location":"46.328260242, -0.465353019369"},{"Postal code":56000,"city":"VANNES","location":"47.6597493766, -2.75714329498"},{"Postal code":95000,"city":"PONTOISE","location":"49.0513737853, 2.09487928948"},{"Postal code":37000,"city":"TOURS","location":"47.3986382281, 0.696526376417"},{"Postal code":"01000","city":"BOURG-EN-BRESSE","location":"46.2051520382, 5.24602125501"},{"Postal code":32000,"city":"AUCH","location":"43.6534300414, 0.575190250459"},{"Postal code":12000,"city":"RODEZ","location":"44.3582426254, 2.5672793892"},{"Postal code":15000,"city":"AURILLAC","location":"44.9245233686, 2.44162453828"},{"Postal code":24000,"city":"PERIGUEUX","location":"45.1918704873, 0.711825549847"},{"Postal code":58000,"city":"NEVERS","location":"46.9881194908, 3.15689130958"},{"Postal code":"02000","city":"LAON","location":"49.5679724897, 3.62089561902"},{"Postal code":65000,"city":"TARBES","location":"43.2347859635, 0.0660093937851"},{"Postal code":47000,"city":"AGEN","location":"44.2028139104, 0.625583928763"},{"Postal code":81000,"city":"ALBI","location":"43.9258213622, 2.14686328555"},{"Postal code":41000,"city":"BLOIS","location":"47.5817013938, 1.30625551583"},{"Postal code":53000,"city":"LAVAL","location":"48.0608565468, -0.766005687142"},{"Postal code":72000,"city":"LE MANS","location":"47.9885256718, 0.200030493539"},{"Postal code":40000,"city":"MONT-DE-MARSAN","location":"43.899361404, -0.490722577455"},{"Postal code":35000,"city":"RENNES","location":"48.1119791219, -1.68186449144"},{"Postal code":11000,"city":"CARCASSONNE","location":"43.2093798444, 2.34398855385"},{"Postal code":"08000","city":"CHARLEVILLE-MEZIERES","location":"49.7752965803, 4.71724655966"},{"Postal code":70000,"city":"VESOUL","location":"47.6320408648, 6.1548458149"},{"Postal code":57000,"city":"METZ","location":"49.1081133279, 6.1955245421"},{"Postal code":31000,"city":"TOULOUSE","location":"43.5963814303, 1.43167293364"},{"Postal code":"06000","city":"NICE","location":"43.7119992661, 7.23826889465"},{"Postal code":52000,"city":"CHAUMONT","location":"48.0980144211, 5.14070044621"},{"Postal code":48000,"city":"MENDE","location":"44.5294508592, 3.48086881176"},{"Postal code":73000,"city":"CHAMBERY","location":"45.583182552, 5.90903392417"},{"Postal code":"03000","city":"MOULINS","location":"46.5624641056, 3.32662040221"},{"Postal code":18000,"city":"BOURGES","location":"47.0749572013, 2.40417137557"},{"Postal code":62000,"city":"ARRAS","location":"50.2898964997, 2.76587316711"},{"Postal code":17000,"city":"LA ROCHELLE","location":"46.1620643972, -1.17465702836"},{"Postal code":89000,"city":"AUXERRE","location":"47.793488225, 3.58168281761"},{"Postal code":76000,"city":"ROUEN","location":"49.4413460103, 1.09256784278"},{"Postal code":22000,"city":"SAINT-BRIEUC","location":"48.5149806053, -2.76154552773"},{"Postal code":80000,"city":"AMIENS","location":"49.9009532186, 2.29007445539"},{"Postal code":54000,"city":"NANCY","location":"48.6901995499, 6.17588254434"},{"Postal code":50000,"city":"SAINT-LO","location":"49.1099624249, -1.07755642702"},{"Postal code":92000,"city":"NANTERRE","location":"48.8960701282, 2.20671346353"},{"Postal code":71000,"city":"MACON","location":"46.3205511756, 4.81842529639"},{"Postal code":33000,"city":"BORDEAUX","location":"44.8572445351, -0.57369678116"},{"Postal code":28000,"city":"CHARTRES","location":"48.4471464884, 1.50570610616"},{"Postal code":46000,"city":"CAHORS","location":"44.4507370916, 1.44075837848"},{"Postal code":16000,"city":"ANGOULEME","location":"45.6472585146, 0.14514490683"},{"Postal code":69000,"city":"LYON","location":"45.7699284397, 4.82922464978"},{"Postal code":77000,"city":"MELUN","location":"48.5444723553, 2.65795821917"},{"Postal code":60000,"city":"BEAUVAIS","location":"49.4365523321, 2.08616123661"},{"Postal code":85000,"city":"LA ROCHE-SUR-YON","location":"46.6675261644, -1.4077954093"},{"Postal code":84000,"city":"AVIGNON","location":"43.9352448339, 4.84071572505"},{"Postal code":27000,"city":"EVREUX","location":"49.02015421, 1.14164412464"},{"Postal code":30000,"city":"NIMES","location":"43.844938394, 4.34806796996"},{"Postal code":66000,"city":"PERPIGNAN","location":"42.6965954131, 2.89936953979"},{"Postal code":78000,"city":"VERSAILLES","location":"48.8025669671, 2.11789297191"},{"Postal code":49000,"city":"ANGERS","location":"47.476837416, -0.556125995444"},{"Postal code":87000,"city":"LIMOGES","location":"45.8542549589, 1.2487579024"},{"Postal code":43000,"city":"LE PUY-EN-VELAY","location":"45.0276366659, 3.89535229067"},{"Postal code":"07000","city":"PRIVAS","location":"44.7225391147, 4.59449538667"},{"Postal code":74000,"city":"ANNECY","location":"45.8906432566, 6.12551773598"},{"Postal code":10000,"city":"TROYES","location":"48.2967099637, 4.07827967525"},{"Postal code":68000,"city":"COLMAR","location":"48.1099405789, 7.38468690323"},{"Postal code":23000,"city":"GUERET","location":"46.1632121428, 1.87078672735"},{"Postal code":67000,"city":"STRASBOURG","location":"48.5712679849, 7.76752679517"},{"Postal code":13000,"city":"MARSEILLE","location":"43.2999009436, 5.38227869795"},{"Postal code":29000,"city":"QUIMPER","location":"47.9971425162, -4.09111944455"},{"Postal code":90000,"city":"BELFORT","location":"47.6471539414, 6.84541206237"},{"Postal code":36000,"city":"CHATEAUROUX","location":"46.8029617828, 1.69399812001"},{"Postal code":64000,"city":"PAU","location":"43.3200189773, -0.350337918181"},{"Postal code":75000,"city":"PARIS","location":"48.8626304852, 2.33629344655"},{"Postal code":14000,"city":"CAEN","location":"49.1847936737, -0.369801713036"},{"Postal code":88000,"city":"EPINAL","location":"48.1631202656, 6.47989286928"},{"Postal code":55000,"city":"BAR-LE-DUC","location":"48.7642280465, 5.16346492169"},{"Postal code":34000,"city":"MONTPELLIER","location":"43.6134409138, 3.86851657896"},{"Postal code":86000,"city":"POITIERS","location":"46.5839207726, 0.359947653003"},{"Postal code":94000,"city":"CRETEIL","location":"48.7837401836, 2.45463530415"},{"Postal code":91000,"city":"EVRY","location":"48.6294831659, 2.44008244492"},{"Postal code":59000,"city":"LILLE","location":"50.6317183168, 3.04783272312"},{"Postal code":21000,"city":"DIJON","location":"47.3229437965, 5.03788805877"},{"Postal code":51000,"city":"CHALONS-EN-CHAMPAGNE","location":"48.9640892125, 4.37883539725"},{"Postal code":44000,"city":"NANTES","location":"47.2316356767, -1.54831008605"},{"Postal code":83000,"city":"TOULON","location":"43.1361589728, 5.93239634249"},{"Postal code":61000,"city":"ALENCON","location":"48.4318193082, 0.0915406916107"},{"Postal code":"09000","city":"FOIX","location":"42.9658502274, 1.61037495894"},{"Postal code":20200,"city":"BASTIA","location":"42.6864768806, 9.42502133338"},{"Postal code":39000,"city":"LONS-LE-SAUNIER","location":"46.6744796278, 5.55733212947"},{"Postal code":42000,"city":"SAINT-ETIENNE","location":"45.4301235512, 4.37913997076"},{"Postal code":"04000","city":"DIGNE-LES-BAINS","location":"44.0908723554, 6.23590323452"}]')}},[[113,1,2]]]);
//# sourceMappingURL=main.9211928e.chunk.js.map