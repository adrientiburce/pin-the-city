{"version":3,"sources":["utils.js","PublicMap.js","icons/pinUser.png","icons/pinCity.png","icons/pin.svg","img/satellite.png","img/terrain.png","img/watercolor.png","App.js","reportWebVitals.js","index.js"],"names":["toRad","Value","Math","PI","capitalize","string","charAt","toUpperCase","slice","toLowerCase","calcCrow","lat1","lon1","lat2","lon2","dLat","dLon","a","sin","cos","atan2","sqrt","shuffleArray","array","i","length","j","floor","random","PublicMap","layer","city","score","setScore","setDistance","useState","map","setMap","prevLayer","value","ref","useRef","useEffect","current","usePrevious","userPoint","setUserPoint","cityPoint","setCityPoint","textPoint","setTextPoint","clickKey","setClickKey","clicked","setClicked","satelliteLayer","TileLayer","source","XYZ","url","waterColorLayer","Stamen","terrainLayer","addPin","point","rotation","srcIcon","isUser","feature","Feature","Point","pinLayer","VectorLayer","VectorSource","features","style","Style","image","Icon","src","scale","textLayer","text","Text","Utils","fill","Fill","color","offsetY","font","addLayer","getLayer","layerName","usedLayer","initialMap","Map","target","layers","view","View","center","zoom","maxZoom","minZoom","controls","defaultControls","extend","ZoomSlider","setTarget","cityLayLong","location","split","eventKey","on","evt","coordinate","userLonLat","transform","cityXY","distance","setTimeout","getView","animate","roundedDistance","round","console","log","removeLayer","unByKey","id","className","App","currentLayer","setCurrentLayer","isPlaying","setIsPlaying","currentIndex","setCurrentIndex","currentCity","setCurrentCity","citiesTotal","keyArray","Object","keys","prefectures","cities","push","randomCities","cityNumber","pin","alt","width","onClick","satellite","terrain","watercolor","CITIES_TOTAL","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3ae3f24c.chunk.js","sourcesContent":["\nfunction capitalize(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n}\n\n//This function takes in latitude and longitude of two location and returns the distance between them as the crow flies (in km)\nfunction calcCrow(lat1, lon1, lat2, lon2) {\n    var R = 6371; // km\n    var dLat = toRad(lat2 - lat1);\n    var dLon = toRad(lon2 - lon1);\n    var lat1 = toRad(lat1);\n    var lat2 = toRad(lat2);\n\n    var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n        Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    var d = R * c;\n    return d;\n}\n\n// Converts numeric degrees to radians\nfunction toRad(Value) {\n    return Value * Math.PI / 180;\n}\n\n\nfunction shuffleArray(array) {\n    for (let i = array.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [array[i], array[j]] = [array[j], array[i]];\n    }\n    return array\n}\n\nexport default {\n    capitalize,\n    calcCrow,\n    shuffleArray,\n}","// react\nimport React, { useState, useEffect, useRef } from 'react';\n\n// openlayers\nimport Map from 'ol/Map'\nimport View from 'ol/View'\nimport { Tile as TileLayer, Vector as VectorLayer } from 'ol/layer';\nimport VectorSource from 'ol/source/Vector';\nimport Feature from 'ol/Feature'\nimport Point from 'ol/geom/Point'\nimport Style from 'ol/style/Style'\nimport Icon from 'ol/style/Icon'\nimport Text from 'ol/style/Text'\nimport Fill from 'ol/style/Fill'\nimport { unByKey } from 'ol/Observable';\nimport { transform } from 'ol/proj'\nimport XYZ from 'ol/source/XYZ'\nimport Stamen from 'ol/source/Stamen'\nimport ZoomSlider from 'ol/control/ZoomSlider';\nimport { defaults as defaultControls } from 'ol/control';\nimport GeoJSON from 'ol/format/GeoJSON';\nimport \"ol/ol.css\";\n\nimport Utils from './utils.js';\nimport pinCity from './icons/pinCity.png'\nimport pinUser from './icons/pinUser.png'\n\n\nfunction usePrevious(value) {\n    const ref = useRef();\n    useEffect(() => {\n        ref.current = value;\n    });\n    return ref.current;\n}\n\nfunction PublicMap({ layer, city, score, setScore, setDistance }) {\n    const [map, setMap] = useState(null)\n    const prevLayer = usePrevious({ layer });\n    const [userPoint, setUserPoint] = useState(null)\n    const [cityPoint, setCityPoint] = useState(null)\n    const [textPoint, setTextPoint] = useState(null)\n    const [clickKey, setClickKey] = useState(null)\n    const [clicked, setClicked] = useState(false)\n\n    const satelliteLayer = new TileLayer({\n        source: new XYZ({\n            url: 'https://api.maptiler.com/tiles/satellite/{z}/{x}/{y}.jpg?key=17SpgImON6btgX4D98pg',\n        }),\n    })\n    const waterColorLayer = new TileLayer({\n        source: new Stamen({\n            layer: 'watercolor',\n        }),\n    })\n\n    const terrainLayer = new TileLayer({\n        source: new Stamen({\n            layer: 'terrain-background',\n        }),\n    })\n\n    // const terrainLinesLayer = new TileLayer({\n    //     source: new Stamen({\n    //         layer: 'terrain-lines',\n    //     }),\n    // })\n\n    // const baseOSM = new TileLayer({\n    //     source: new OSM()\n    // })\n\n    function addPin(point, rotation, srcIcon, isUser) {\n        const feature = new Feature(new Point(point));\n        const pinLayer = new VectorLayer({\n            source: new VectorSource({\n                features: [feature]\n            }),\n            style: new Style({\n                image: new Icon({\n                    src: srcIcon,\n                    scale: .8,\n                    rotation: rotation,\n                })\n            })\n        });\n        const textLayer = new VectorLayer({\n            source: new VectorSource({\n                features: [feature]\n            }),\n            style: new Style({\n                text: new Text({\n                    text: Utils.capitalize(city.city),\n                    fill: new Fill({\n                        color: '#fff'\n                    }),\n                    offsetY: -35,\n                    font: '15px Arial'\n                })\n            })\n        })\n        if (isUser) {\n            setUserPoint(pinLayer)\n        } else {\n            map.addLayer(textLayer)\n            setCityPoint(pinLayer)\n            setTextPoint(textLayer)\n        }\n        map.addLayer(pinLayer)\n    }\n\n\n    const getLayer = (layerName) => {\n        let usedLayer;\n        switch (layerName) {\n            case 'satellite':\n                usedLayer = satelliteLayer\n                break;\n            case 'terrain':\n                usedLayer = terrainLayer\n                break;\n            case 'watercolor':\n                usedLayer = waterColorLayer\n                break;\n            default:\n                usedLayer = terrainLayer\n                break;\n        }\n        return usedLayer\n    }\n\n    useEffect(() => {\n        const franceCenter = [302151.8127592789, 5924266.214486205] // x,y point\n        const defaultZoom = 6\n        const initialMap = new Map({\n            target: null,\n            layers: [getLayer(layer)],\n            view: new View({\n                center: franceCenter,\n                zoom: defaultZoom,\n                maxZoom: 12,\n                minZoom: 4,\n            }),\n            controls: defaultControls().extend([new ZoomSlider()]),\n        })\n        setMap(initialMap);\n    }, [])\n\n    const unBindKey = () => {\n        console.log(clickKey)\n        unByKey(clickKey)\n    }\n    useEffect(() => {\n        if (map !== null) { //TODO: fix with checking not first render\n            map.setTarget(\"map\")\n            const cityLayLong = city.location.split(\",\")\n\n            let eventKey = map.on('click', function (evt) {\n                let userPoint = evt.coordinate\n                let userLonLat = transform(userPoint, 'EPSG:3857', 'EPSG:4326');\n                let cityXY = transform([cityLayLong[1], cityLayLong[0]], 'EPSG:4326', 'EPSG:3857');\n\n                addPin(evt.coordinate, 0.15, pinUser, true)\n                addPin(cityXY, -0.15, pinCity, false)\n\n                let distance = Utils.calcCrow(cityLayLong[0], cityLayLong[1], userLonLat[1], userLonLat[0])\n                setTimeout(() => {\n                    smoothZoomOnPoint(cityXY, 12)\n                }, 200)\n                let roundedDistance = Math.round(distance)\n                console.log(\"D\", distance)\n\n                setDistance(roundedDistance)\n                if (distance < 100) {\n                    setScore(score + 100 - roundedDistance)\n                }\n                setClicked(true)\n            })\n            setClickKey(eventKey)\n        }\n    }, [city]);\n\n    useEffect(() => {\n        if (map != null) {\n            map.removeLayer(getLayer(prevLayer.layer))\n            map.addLayer(getLayer(layer))\n        }\n    }, [layer]);\n\n    useEffect(() => {\n        if (cityPoint !== null) { // TODO: change condition\n            console.log(\"city CHANGED\", city)\n            map.removeLayer(userPoint)\n            map.removeLayer(cityPoint)\n            map.removeLayer(textPoint)\n            unByKey(clickKey)\n            setDistance(0)\n        }\n    }, [city])\n\n    useEffect(() => {\n        if (clicked) {\n            unByKey(clickKey)\n            setClicked(false)\n        }\n    }, [clicked])\n\n\n    function smoothZoomOnPoint(point, zoom) {\n        map.getView().animate({\n            center: point,\n            zoom: zoom\n        })\n    }\n\n    // render component\n    return (\n        <div id=\"map\" className=\"map-container\"></div>\n    )\n}\n\nexport default PublicMap\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAQSwAAEEsB549FewAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAPtSURBVHic7ZlNTBxlGMd/z+xuCyUKqf1QatUtXSUpH9V2iT0YTVRMJFEvJCbGg0QvctdEjeGmVU8eejDqiYMfiakx9mA06a0psCjFRKWFpbEoFizQlu22uzuPB6i2ZFeB91nemMzvRGaY3/Off3Z2dt4RNohfDx2qLRQWuxQeRXgASAINy7vngSyQQfluU6Lu2O4TJ65sRC6p9oDxAwfqCQqvAi8D9as8bAE4Qpg43JTJLFQvXRULUJDswdZeRPoUblunZlZU+5JDo0cE1DTgMlUpIPvIPTWl3K0fiPK8hU/g05ow0dOYyeQsfCvctmT3728IE6VvQNLG6gHCRKf1JRFYyrS7OxbGS/1VOHmADuTaZ9rdHbOUmhYwcXbsXUS6LJ03IdI5PvnL26ZKK9FEx7521dgwZUoN4nHim2so5vOEpaLrqDAMSacyp4ZdRQBxCwmAauw9ypx8/R27qdu2E0RQVS7P/M6l6SmXUUEg+hbwhIvkb5mFJJtufRh4bOX2LVu3U7f9dpClD5qIcMuORmob1ntXXEakc6Kj7SE3yRImBahKT7nttQ1by/5/pe1rm6kvOEswKEBBVHjSIszakC41+A5zLuDsgy3NwLZy+/IX58sek7845zoWYEf2YNu9rhLnAophrLnSvsU/z5O7MHPzttk/yF2YdR0LQAmtOHu1ON8FBHZW3KnK/LlJLs9ME9+0mUL+CqXCNdeR/8yWf5m9Stxvg6HW/NeVWLyap3g17zxqJYLUujoMvgRlQ57byyHCoqvDuYBA9DdXx3rR0H22cwFhqfSTq2O9lISfXR0mzwLj6bZzwC4L1xqYaho8daerxOZpUPnKxLMm5KiFxeancEw/pEpLVpVGhspHFiKTAvaeHM0AX1i4VoOin6eGRr63cNktiIi8BhTMfJUpSBB7w0pmVkDTwMgYyJtWvkqo8nrTyR9OW/nMF0XH0+39oM9Ze5fQ/qbBUZOV5uuYrgkCBHULLyIcs/ai+nVQd+kla615Acnjk/k9d9/3FMhhK6fA+3uSzU8nj0+aP1BU9dXYmY7WZ0TlHSC1TsVYqPpKamj0S8tcN2L+CbiRvQOjR+fCxD6gV2BiDYeOA71zYaKlmicPG/By9DpL7wrb0wT6uCr3q5BaiG9pAagv5n4U5bQowyDfJodGBqv1LnAlG1bASp7t6WsshUwBxAJ2ffJxn5enyqpeAv8HogJ8B/BNVIDvAL6JCvAdwDdRAb4D+CYqwHcA30QF+A7gm6gA3wF8ExXgO4BvogJ8B/BNVIDvAL6JCvAdwDdRAb4D+CYqwHcA30QF+A7gm6gA3wF8462A6bs4DwwDw8t/e+EvEJAYca8hpZEAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAEYklEQVR4Xu1ZXWwUVRi9s7gKQioYkARD0t07rZg6dwqzu8CLkvg/s5AabTQx+lBDIIEHJFHkbV4MMRKMGqzBv5jwoGI1yExJqiZNfEDY2dqZEX/o3NkmRA0BAqIUkqU7ZIptNmVLd+Z+0xfvPu5853xnzt65892zApqjz+n16xdUq5e1AKGHcdHZ2qgtNUkvCtD3t6cX9q88duzKXEgTkm5CFeUulKruwpqzO0ovapI9qJZ+A5fLf0fBRa1NzIAAIaGSk7Zli+67UUXV1/uGtD1jue8JCAUsPDNhEzGgsqF1/vhYywFRdV6AEO2b5PP5tXTPinJ5DIKvngPcgEpn5+JM1/AFaKEhHz2iLIZ+JEANCLq75/mV3w7joqslYoAhDWQzq1Th0KFxKH5QA2hB3odV+2UocY14PJPsFUvOK1A9wAzwCx1yVj05DCXsVjwjR4jSVnaGIHqBGUDz5FusOY9MF3VuSEMLly5HSBBQEATo37N/oXuUo0zaqSENYMt9nInkPzCIAZW89FBGcwcbCbpy+qWbvl6w8iNm7X4/eTB7wvmBlQjEAD9HPs0WnReni7n4aze6Y1HLTRqvXrqIlnT0MWmnpvQJLrk9TCQIIWYDwoFH0FGtkZAkDQj7BTpKsQ5IzAaMrnvg/tYnfv5lpl8iqUcg7OcbZFXWcn5nWQXMBngF+SlRtb+aScR5exO68+5lU5cvnzuDlq42WDRPYUcMqavNcg+zkDEbQAvyVqzavSwi4mI9Q9oiWu6BuPgQx25AjuzARectFhFxsdQkO3DJeTsuHsQALydvEYv2+ywi4mL9frI5e8L5MC4exAA/TzZmNecbFhFxsdSQNGy5/XHxIAZ4azpEcdPJERYRcbGnTAm3l1w/Lh7EgInmejJhxaw3prPvYcybYCiS5kjvTDnfrDcRs4Ca8n5csrfHhE/BQAzw1kqK+KRrsYqJgh8x5DVtlv1TFEyjWhADJlZBnnyJNedpVkHN4D1T+kIsuc82UztbDZwBBbkdqzbTWDqb2Mnr9GhnOz4+DLLxghlwYxXIr2HN3tPsjcSp8wzyqmg5b8bBJvoITP06efkg1uznoQTW81BTOohLLkjSPMkLugJC0jASr4219GHVUSFNoIZkphb980xmcPQqJC+4AaG4iXR49NTrWLN3QYj1TfJOpvW+nZBpcGIroP6GvYLUJaru1ywmQBx5b9U/kRVQ39BSlPSSVHUz1pz9UYygJtl2oZb+IFcuV6PgotYmbsCkoBv/Fcp5lAoeDQK0OpwZygPrJqI05bEfU9QkfUKAhhASvstYdok16mrWiDkzYLqg53r0FeM19Ef4/bwUuvezj/U/mxUNWccNgHQzChdfAfwR4HsA3wT5W4C/BvkcwAchPgnyUZifBfhhiJ8G+XGY5wE8EOGJEI/EeCbIQ9EomSJULU+FoZyMysNTYZ4K81SYp8I8FeapME+F/7+p8AZdv23ZKDoezg9nW9HaQV2/FnWWgKi/DixoI19uxqmzAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/pin.cb6cde87.svg\";","export default __webpack_public_path__ + \"static/media/satellite.98aa5691.png\";","export default __webpack_public_path__ + \"static/media/terrain.0905c933.png\";","export default __webpack_public_path__ + \"static/media/watercolor.419c9c9e.png\";","import './App.css';\nimport React, { useEffect, useState } from 'react';\nimport PublicMap from './PublicMap';\nimport pin from './icons/pin.svg'\nimport satellite from './img/satellite.png'\nimport terrain from './img/terrain.png'\nimport watercolor from './img/watercolor.png'\nimport prefectures from './data/prefectures.json'\nimport Utils from './utils.js'\n\n\nfunction randomCities(citiesTotal) {\n  let keyArray = Object.keys(prefectures);\n  keyArray = Utils.shuffleArray(keyArray); // shuffle it!\n  let cities = []\n  for (var i = 0; i < citiesTotal; ++i) {\n    cities.push(prefectures[keyArray[i]]);\n  }\n  return cities\n}\n\n\nfunction App() {\n  const CITIES_TOTAL = 5;\n\n  const [currentLayer, setCurrentLayer] = useState('satellite')\n  const [isPlaying, setIsPlaying] = useState(true)\n\n  const [currentIndex, setCurrentIndex] = useState(0)\n  const [currentCity, setCurrentCity] = useState({\n    city: \"\",\n    location: \"\"\n  })\n  const [cities, setCities] = useState(randomCities(CITIES_TOTAL))\n  const [score, setScore] = useState(0)\n  const [distance, setDistance] = useState(0)\n  const cityNumber = currentIndex + 1\n\n  useEffect(() => {\n    if(cities.length > 0) {\n      setCurrentCity(cities[currentIndex])\n    }\n  }, [cities]);\n\n  useEffect(() => {\n    console.log(cities)\n    console.log(currentIndex)\n    if (currentIndex === CITIES_TOTAL) {\n      setIsPlaying(false)\n      return\n    }\n    setCurrentCity(cities[currentIndex])\n\n  }, [currentIndex]);\n\n  return (\n    <div className=\"App\">\n\n      <div className=\"top\">\n        <div className=\"header\">\n          <div className=\"title\">\n            <h1>Pin the city&nbsp;</h1> <img src={pin} alt=\"React Logo\" width='20px' />\n          </div>\n\n          <div className=\"edit-buttons\">\n            {currentLayer !== 'satellite' &&\n              <div className=\"map-edit\" onClick={() => setCurrentLayer('satellite')}>\n                <img src={satellite} alt=\"satellite map\" width='60px' />\n                <caption>Vue Satelitte</caption>\n              </div>\n            }\n            {currentLayer !== 'terrain' &&\n              <div className=\"map-edit\" onClick={() => setCurrentLayer('terrain')}>\n                <img src={terrain} alt=\"terrain map\" width='60px' />\n                <caption>Vue Carte</caption>\n              </div>\n            }\n            {currentLayer !== 'watercolor' &&\n              <div className=\"map-edit\" onClick={() => setCurrentLayer('watercolor')}>\n                <img src={watercolor} alt=\"watercolor map\" width='60px' />\n                <caption>Vue Dessin√©</caption>\n              </div>\n            }\n          </div>\n\n        </div>\n\n        <div className=\"game\">\n          <h2>{cityNumber}/{CITIES_TOTAL}</h2>\n          <h2>Placer la ville de {Utils.capitalize(currentCity.city)} {distance > 0 && (\", \" + distance + \" km\")}</h2>\n          {isPlaying && (currentIndex < CITIES_TOTAL-1) &&\n            <button onClick={() => setCurrentIndex(currentIndex + 1)}> Ville suivante</button>\n          }\n          <h2>Score : {score} </h2>\n        </div>\n      </div>\n\n\n      <div className=\"box\">\n        <PublicMap layer={currentLayer} city={currentCity} score={score} setScore={setScore} setDistance={setDistance} />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}